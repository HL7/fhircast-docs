<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Synchronization Considerations - FHIRcast</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Synchronization Considerations";
    var mkdocs_page_input_path = "syncconsiderations.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> FHIRcast</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Specification</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../specification/STU2/">Current - STU2</a>
                </li>
                <li class="">
                    
    <a class="" href="../specification/STU1/">STU1</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Event Catalog</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../events/template/">new-event-template</a>
                </li>
                <li class="">
                    
    <a class="" href="../events/syncerror/">syncerror</a>
                </li>
                <li class="">
                    
    <a class="" href="../events/userlogout/">userlogout</a>
                </li>
                <li class="">
                    
    <a class="" href="../events/userhibernate/">userhibernate</a>
                </li>
                <li class="">
                    
    <a class="" href="../events/patient-open/">Patient-open</a>
                </li>
                <li class="">
                    
    <a class="" href="../events/patient-close/">Patient-close</a>
                </li>
                <li class="">
                    
    <a class="" href="../events/imagingstudy-open/">ImagingStudy-open</a>
                </li>
                <li class="">
                    
    <a class="" href="../events/imagingstudy-close/">ImagingStudy-close</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../launch-scenarios/">Launch Scenarios</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Synchronization Considerations</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#synchronization-considerations">Synchronization Considerations</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#scenarios">Scenarios</a></li>
        
            <li><a class="toctree-l3" href="#synchronization-recommendations">Synchronization recommendations</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../security-considerations/">Security Considerations</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../multitab-considerations/">Multi-tab Considerations</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../about/">About</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">FHIRcast</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Synchronization Considerations</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <div class="admonition info">
<p class="admonition-title">Implementer guidance</p>
<p>This page contains guidance to implementers and is not part of the normative-track <a href="../specification/STU2">FHIRcast specification</a>.</p>
</div>
<h1 id="synchronization-considerations">Synchronization Considerations</h1>
<p>FHIRcast describes a mechanism for synchronizing distinct applications. 
Sometimes things go wrong and applications fail to synchronize or become out of sync. 
For example, the user within the EHR opens a new patient's record,
but the app fails to process the update and continues displaying the initial patient.<br />
Depending upon the expectations of the user and the error handling of the applications in use, 
this scenario is potentially risky. 
Identified below are four distinct synchronization scenarios, ranging from lowest level of expected synchronization to highest. </p>
<p>Overall, FHIRcast does not dictate how applications should react to synchronization failure. 
You should design your product to meet your customer's expectations and needs.
Appropriate error handling is specific to the synchronization scenario, user expectations and implemeter.</p>
<p>Also note that synchronization failure is a worst-case scenario and should rarely occur in production.</p>
<h2 id="scenarios">Scenarios</h2>
<p>Below a couple of usage scenarios are listed where the risk of becoming out of sync are exemplified</p>
<h3 id="machine-to-machine-to-machine-different-machines-different-times">Machine-to-machine-to-machine: Different machines, different times</h3>
<p><strong>Scenario</strong>: Clinician walks away from her desktop EHR and accesses an app on her mobile device which synchronizes to the EHR's hibernated session. </p>
<table>
<thead>
<tr>
<th>Consideration</th>
<th>Risk</th>
</tr>
</thead>
<tbody>
<tr>
<td>Synchronization failure significance</td>
<td>low</td>
</tr>
<tr>
<td>Performance expectations</td>
<td>negligible</td>
</tr>
<tr>
<td>User inability to distinguish between synchronized applications</td>
<td>n/a</td>
</tr>
</tbody>
</table>
<p><strong>Summary</strong>: This serial or sequential use-case is a convenience synchronization and the clinical risk for synchronization failure is low. </p>
<h3 id="cross-device-different-machines-same-time">Cross device: Different machines, same time</h3>
<p><strong>Scenario</strong>: Clinician accesses her desktop EHR as well an app on her mobile device at the same time. Mobile device synchronizes with the EHR desktop session. </p>
<table>
<thead>
<tr>
<th>Consideration</th>
<th>Risk</th>
</tr>
</thead>
<tbody>
<tr>
<td>Synchronization failure significance</td>
<td>medium</td>
</tr>
<tr>
<td>Performance expectations</td>
<td>low</td>
</tr>
<tr>
<td>User inability to distinguish between synchronized applications</td>
<td>low</td>
</tr>
</tbody>
</table>
<p><strong>Summary</strong>: The user clearly distinguishes between the applications synchronized on multiple devices and therefore clinical risk for a synchronization failure depends upon the workflow and implementer's goals. User manual action may be appropriate when synchronization fails.</p>
<h3 id="same-machine-same-time">Same machine, same time</h3>
<p><strong>Scenario</strong>: Clinician is accessing two or more applications on the same machine in a single workflow.  </p>
<table>
<thead>
<tr>
<th>Consideration</th>
<th>Risk</th>
</tr>
</thead>
<tbody>
<tr>
<td>Synchronization failure significance</td>
<td>medium</td>
</tr>
<tr>
<td>Performance expectations</td>
<td>high</td>
</tr>
<tr>
<td>User inability to distinguish between synchronized applications</td>
<td>medium</td>
</tr>
</tbody>
</table>
<p><strong>Summary</strong>: Although, disparate applications are distinguishable from one another, the workflow requires rapidly accessing one then another application. Application responsivity to synchronization is particularly important. Synchronization failure may introduce clinical risk and therefore user notification of synchronization failure is suggested.</p>
<h3 id="embedded-apps-same-machine-same-time-same-ui">Embedded apps: Same machine, same time, same UI</h3>
<p><strong>Scenario</strong>: Clinician accesses multiple applications within a single user interface. </p>
<table>
<thead>
<tr>
<th>Consideration</th>
<th>Risk</th>
</tr>
</thead>
<tbody>
<tr>
<td>Synchronization failure significance</td>
<td>very high</td>
</tr>
<tr>
<td>Performance expectations</td>
<td>high</td>
</tr>
<tr>
<td>User inability to distinguish between synchronized applications</td>
<td>very high</td>
</tr>
</tbody>
</table>
<p><strong>Summary</strong>: Disparate applications indistinguishable from one another require the greatest amount of context synchronization. Clinical risk of synchronization failure is critical. Application responsivity to synchronization should be high. Synchronization failure may introduce clinical risk and therefore user notification of synchronization failure is suggested.</p>
<h2 id="synchronization-recommendations">Synchronization recommendations</h2>
<p>FHIRcast is based on a subscription model where each subscribing client receives notifications of the updated state of the topic being subscribed to. There is no explicit requirement for a subscribing client to follow the context of another client. 
The subscription model also implies that it is the subscribing clients responsibility to maintain a contextual synchronization or to notify end users whenever the contextual synchronization is lost.
However, as noted in above scenarios, there may be risk associated with the end user expectation of have two tightly synchronized applications if they fall out of sync. 
There are in some cases good reasons for a client not to follow the subscribed context and this section will outline some of the recommended approaches.</p>
<h3 id="blocking-action-on-subscribing-client-preventing-context-synchronization">Blocking action on subscribing client preventing context synchronization</h3>
<p>Many systems in some cases go into edit mode or start a modal dialog that locks the system from changing context without user intervention. Examples can be when modifying texts, reports, annotating images or performing administrative tasks. The clients may by design then decline to follow the subscribed context to prevent loss of end user data.</p>
<table>
<thead>
<tr>
<th>System</th>
<th>Failure mode</th>
<th>Possible actions</th>
</tr>
</thead>
<tbody>
<tr>
<td>Subscribing Client</td>
<td>Modal dialog open in UI, unable to change case without losing end user data</td>
<td>Present end user with clear indication that contextual synchronization is lost</td>
</tr>
<tr>
<td>Subscribing Client</td>
<td>Unable to change context</td>
<td>Respond with a http status code of 409 conflict</td>
</tr>
<tr>
<td>Hub</td>
<td>One of the subscribing clients cannot follow context</td>
<td>No action/Update all subscribing clients with event sync-error</td>
</tr>
</tbody>
</table>
<h3 id="unresponsive-callback-url-of-subscribing-client">Unresponsive callback url of subscribing client</h3>
<p>This error scenario is all about the Hub losing contact with its subscribing clients. This may be due to a client crash, mis-configured callback url or simply an underlying network failure. In these cases the clients are usually not aware of the fact that the context has changed or that the subscription messages are not received.</p>
<table>
<thead>
<tr>
<th>System</th>
<th>Failure mode</th>
<th>Possible actions</th>
</tr>
</thead>
<tbody>
<tr>
<td>Subscribing Client</td>
<td>No event received from Hub</td>
<td>No action possible</td>
</tr>
<tr>
<td>Hub</td>
<td>Timeout or error from client callback url</td>
<td>No action/Retry/Update all subscribing clients with event sync-error</td>
</tr>
</tbody>
</table>
<h3 id="race-condition-during-launch">Race condition during launch</h3>
<p>Once an app is launched with initial context, for example, the currently in context patient, the app must subscribe before it receives notifications of updated context. Between the instant of launch and the instant of a confirmed subscription, it's technically possible for context to change, such that the newly launched app joins a session with stale contextual information. In most scenarios, this problem is likely noticeable by the end user. Apps should optimize the time required to launch and subscribe to reduce this likelihood.</p>
<h3 id="sync-error-event-received-from-hub">Sync-error event received from Hub</h3>
<p>In the scenarios where the Hub is aware of a synchronization error, it is advisable for the Hub to signal this to the subscribing applications to minimize any patient risk associated with having one or many applications out of sync.</p>
<table>
<thead>
<tr>
<th>System</th>
<th>Failure mode</th>
<th>Possible actions</th>
</tr>
</thead>
<tbody>
<tr>
<td>Subscribing Client</td>
<td>Sync-error event received from Hub</td>
<td>Present end user with clear indication that contextual synchronization is lost</td>
</tr>
</tbody>
</table>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../security-considerations/" class="btn btn-neutral float-right" title="Security Considerations">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../launch-scenarios/" class="btn btn-neutral" title="Launch Scenarios"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>®© HL7.org 2017+ <a rel="license" href="https://www.hl7.org/fhir/license.html"><img src="https://www.hl7.org/fhir/cc0.png" alt="CC0"></a></p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../launch-scenarios/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../security-considerations/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
